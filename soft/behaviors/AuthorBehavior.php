<?phpnamespace soft\behaviors;use Yii;use yii\base\Behavior;use yii\db\ActiveRecord;class AuthorBehavior extends Behavior{    public $createdByAttribute = 'user_id';    /**     * @var bool Agar true bo'lsa $this->createdByAttribute qiymati bo'sh bo'lmasa ham ayni paytdagi userning id qiymatini yozib qo'yadi     */    public $forceInsert = false;    public $updatedByAttribute = false;    public $forceUpdate = true;    public function events()    {        return [            ActiveRecord::EVENT_BEFORE_INSERT => 'beforeInsert',            ActiveRecord::EVENT_BEFORE_UPDATE => 'beforeUpdate',        ];    }    public function beforeInsert()    {        $createdByAttribute = $this->createdByAttribute;        if ($createdByAttribute == false) {            return '';        }        if (!Yii::$app->user->isGuest) {            if ($this->forceInsert) {                $this->owner->$createdByAttribute = Yii::$app->user->identity->id;            } else {                if (!empty($this->owner->$createdByAttribute)) {                    $this->owner->$createdByAttribute = Yii::$app->user->identity->id;                }            }        }    }    public function beforeUpdate()    {        $updatedByAttribute = $this->updatedByAttribute;        if ($updatedByAttribute == false) {            return '';        }        if (!Yii::$app->user->isGuest) {            if ($this->forceUpdate) {                $this->owner->$updatedByAttribute = Yii::$app->user->identity->id;            } else {                if (!empty($this->owner->$updatedByAttribute)) {                    $this->owner->$updatedByAttribute = Yii::$app->user->identity->id;                }            }        }    }}